# Task 004: Standardize tool return format

## Metadata

- **Task ID**: 004
- **Epic**: pipeline-fixes
- **Name**: Standardize tool return format
- **Status**: COMPLETED
- **Priority**: High
- **Size**: L (12 hours)
- **Created**: 2025-08-22T13:29:31Z
- **Dependencies**: None
- **Can Run in Parallel**: Yes

## Description

Standardize the return format for all tools to use a consistent structure with `result`, `success`, and `error` fields. Currently, tools return inconsistent formats, making it difficult for pipeline systems to handle outputs uniformly.

The standardized format should be:
```python
{
    "success": bool,          # True if operation succeeded
    "result": Any,            # The actual result data (if success=True)
    "error": str | None,      # Error message (if success=False)
    "metadata": dict | None   # Optional metadata about the operation
}
```

## Acceptance Criteria

- [ ] All tools return consistent format with success/result/error structure
- [ ] Base Tool class defines and enforces standard return format
- [ ] Pipeline systems can rely on consistent return structure
- [ ] Error handling is standardized across all tools
- [ ] Backward compatibility maintained where possible
- [ ] Tool documentation reflects standard return format

## Files Affected

- Base Tool class definition
- All tool implementations (likely 20+ files)
- Pipeline control systems that process tool outputs
- Test files for tools
- Tool interface documentation

## Implementation Notes

- Update base Tool class to define standard return format
- Create helper methods for consistent return value creation
- Update all individual tool implementations
- Consider using a decorator or wrapper for automatic format conversion
- Handle edge cases where tools currently return complex formats
- Ensure error information is preserved and meaningful

## Testing Requirements

- Test all tools return standard format
- Verify pipeline systems work with new format
- Test error cases return proper error structure
- Integration tests with control systems
- Backward compatibility tests where applicable
- Performance testing to ensure format changes don't impact speed

## Definition of Done

- All tools return standardized format
- Base Tool class enforces consistent returns
- Pipeline systems updated to use standard format
- All tests pass with new return format
- Tool documentation updated
- Error handling is consistent and informative across all tools

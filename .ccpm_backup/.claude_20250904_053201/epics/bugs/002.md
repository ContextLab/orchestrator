---
name: Generate-structured action returns strings instead of structured data
status: active
created: 2025-08-21T21:14:57Z
updated: 2025-08-21T21:14:57Z
github: https://github.com/ContextLab/orchestrator/issues/221
imported: true
labels: bug, high-priority
---

# Generate-structured action returns strings instead of structured data

**GitHub Issue:** [#221](https://github.com/ContextLab/orchestrator/issues/221)
**Status:** OPEN
**Labels:** bug, high-priority

## Description

## Problem
The `generate-structured` action returns string representations instead of actual structured data objects, making it impossible to access fields in templates.

## Evidence
From fact checker pipeline:
- `extract_claims` returns a string containing JSON, not an actual object
- Template `{{ extract_claims.claims }}` fails because extract_claims is a string
- Error: `'str object' has no attribute 'claims'`

## Impact
- Cannot iterate over returned arrays
- Cannot access nested fields in templates
- Structured data workflows broken

## Expected Behavior
`generate-structured` should return actual Python dict/list objects that can be accessed in templates:

```yaml
- id: extract_data
  action: generate-structured
  parameters:
    schema:
      type: object
      properties:
        items:
          type: array
          
- id: process_items
  for_each: "{{ extract_data.items }}"  # Should work
```

## Current Behavior
Returns a string, so `extract_data.items` fails with "str has no attribute 'items'"

## Test Case
```python
result = await generate_structured(schema={...})
assert isinstance(result, dict)  # Should be dict, not str
assert 'items' in result  # Should have schema properties
```

## Related
- Issue #172 (Fact checker needs structured data)
- Template iteration depends on actual objects
---
name: DataProcessingTool improvements: CSV handling and consistent return fields
status: active
created: 2025-08-21T20:37:48Z
updated: 2025-08-21T20:37:48Z
github: https://github.com/ContextLab/orchestrator/issues/216
imported: true
labels: bug, enhancement
---

# DataProcessingTool improvements: CSV handling and consistent return fields

**GitHub Issue:** [#216](https://github.com/ContextLab/orchestrator/issues/216)
**Status:** OPEN
**Labels:** bug, enhancement

## Description

## Problem
The DataProcessingTool has several issues that affect pipeline functionality:

1. CSV transformation returns empty arrays
2. Inconsistent field names in return values ('result' vs 'processed_data')
3. AUTO tag resolution for operations not properly implemented
4. Doesn't handle empty data gracefully

## Evidence
From recursive_data_processing pipeline execution:
```
process_data step returns {'processed_data': [], 'success': true}
```

Template variables fail because of inconsistent field names:
```
process_data.result renders as '{{result}}' instead of actual data
```

## Solution

### 1. Fix CSV transformation
- Properly parse CSV from files and strings
- Return actual transformed data

### 2. Standardize return fields
- Always include 'result' field for consistency
- Keep 'processed_data' for backward compatibility

### 3. Implement AUTO tag resolution
- Use model to resolve ambiguous operations
- Provide clear prompts for operation determination

### 4. Handle edge cases
- Empty data should return appropriate empty result
- Malformed data should return error with details

## Acceptance Criteria
- CSV data is properly loaded and transformed
- All actions return 'result' field consistently
- AUTO tags in operations are resolved using models
- Empty/malformed data handled gracefully with appropriate messages
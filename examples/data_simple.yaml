name: "Data Processor Simple"
description: "Simple data processing pipeline"
model: "ollama/llama3.2"

inputs:
  data_source:
    type: string
    required: true
  process_type:
    type: string
    default: "analyze"

steps:
  - id: load_data
    action: |
      Load and describe data from: {{data_source}}
      
      Provide:
      1. Data format
      2. Number of records
      3. Column/field names
      4. Data types
      
  - id: analyze_data
    action: |
      Analyze the data:
      
      Data info: {{load_data.result}}
      Process type: {{process_type}}
      
      Perform:
      1. Statistical summary
      2. Data quality checks
      3. Pattern identification
      4. Anomaly detection
    depends_on: [load_data]
    
  - id: process_data
    action: |
      Process the data based on analysis:
      
      {{analyze_data.result}}
      
      Apply:
      1. Data cleaning
      2. Transformations
      3. Feature engineering
      4. Aggregations
    depends_on: [analyze_data]
    
  - id: generate_insights
    action: |
      Generate insights from processed data:
      
      {{process_data.result}}
      
      Include:
      1. Key findings
      2. Trends identified
      3. Recommendations
      4. Next steps
    depends_on: [process_data]
    
  - id: save_report
    action: |
      Save to examples/output/data_{{data_source | replace(' ', '_') | lower}}.md:
      
      # Data Processing Report: {{data_source}}
      
      *Generated on: {{execution.timestamp}}*
      *Model: Ollama Llama2*
      
      ## Data Overview
      
      {{load_data.result}}
      
      ## Analysis Results
      
      {{analyze_data.result}}
      
      ## Processing Summary
      
      {{process_data.result}}
      
      ## Key Insights
      
      {{generate_insights.result}}
      
      ---
      *Generated by Orchestrator Data Processing Pipeline*
    depends_on: [generate_insights]


  - id: save_output
    action: |
      Save the following content to examples/output/data_simple.md:
      
      # Data Simple
      
      *Generated on: {{execution.timestamp}}*
      *Pipeline: data_simple*
      
      ## Output
      
      {{generate_insights.result}}
      
      ---
      *Generated by Orchestrator Data Simple Pipeline*
    depends_on: [generate_insights]
outputs:
  insights: "{{generate_insights.result}}"
  file_path: "examples/output/data_{{data_source | replace(' ', '_') | lower}}.md"

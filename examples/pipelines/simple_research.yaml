id: simple-research
name: Simple Research Pipeline
description: A basic research pipeline that searches the web and summarizes findings
version: "1.0.0"

parameters:
  topic:
    type: string
    required: true
    description: The research topic

steps:
  - id: search_web
    tool: web-search
    action: search
    parameters:
      query: "{{topic}}"
      max_results: 5
  
  - id: summarize_results
    action: generate_text
    parameters:
      prompt: |
        Summarize the key findings from these search results about {{topic}}:
        
        {% for result in search_web.results %}
        {{loop.index}}. {{result.title}}
           {{result.snippet}}
           Source: {{result.url}}
        {% endfor %}
        
        Provide a concise summary of the main points.
      model: <AUTO task="summarize">Select appropriate model for summarization</AUTO>
      max_tokens: 500
    dependencies:
      - search_web
  
  - id: save_summary
    tool: filesystem
    action: write
    parameters:
      path: "research/{{topic | slugify}}_summary.md"
      content: |
        # Research Summary: {{topic}}
        
        **Date:** {{ execution.timestamp }}
        **Sources Reviewed:** {{search_web.total_results}}
        
        ## Summary
        
        {{summarize_results.result}}
        
        ## Sources
        
        {% for result in search_web.results %}
        {{loop.index}}. [{{result.title}}]({{result.url}})
           > {{result.snippet}}
        {% endfor %}
        
        ---
        *Generated by Simple Research Pipeline*
    dependencies:
      - summarize_results

outputs:
  summary: "{{summarize_results.result}}"
  search_count: "{{search_web.total_results}}"
  output_file: "{{save_summary.filepath}}"
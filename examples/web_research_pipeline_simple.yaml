id: web-research-pipeline-simple
name: Simplified Web Research Pipeline
description: Basic web research automation with comprehensive reporting
version: "1.0.0"

parameters:
  research_topic:
    type: string
    default: "artificial intelligence in healthcare"
    description: The topic to research
  max_sources:
    type: number
    default: 10
    description: Maximum number of sources to search

steps:
  # Step 1: Initial web search
  - id: initial_search
    tool: web-search
    action: search
    parameters:
      query: "{{ parameters.research_topic }} latest developments 2024"
      max_results: "{{ parameters.max_sources }}"
      
  # Step 2: Extract key themes from search results
  - id: identify_themes
    action: generate_text
    dependencies:
      - initial_search
    parameters:
      prompt: |
        Analyze these search results for "{{ parameters.research_topic }}" and extract key information:
        
        Search Results: {{ initial_search.result }}
        
        Please analyze and provide:
        1. Main themes (5-7 key topics)
        2. Key organizations mentioned  
        3. Trending subtopics
        4. Notable developments
        
        Format as structured JSON with fields: main_themes, key_organizations, trending_subtopics, notable_developments
      model: "claude-sonnet-4-20250514"
      max_tokens: 2000
      
  # Step 3: Generate comprehensive research summary
  - id: research_summary
    action: generate_text
    dependencies:
      - initial_search
      - identify_themes
    parameters:
      prompt: |
        Create a comprehensive research summary on "{{ parameters.research_topic }}" based on these findings:
        
        Search Results: {{ initial_search.result }}
        
        Theme Analysis: {{ identify_themes.result }}
        
        Please create a detailed research report including:
        1. Executive Summary
        2. Current State of {{ parameters.research_topic }}
        3. Key Players and Organizations  
        4. Recent Developments and Trends
        5. Challenges and Opportunities
        6. Future Outlook
        7. Key Statistics and Data Points
        8. Recommendations
        
        Format as professional markdown report suitable for business use.
      model: "claude-sonnet-4-20250514"  
      max_tokens: 4000
      
  # Step 4: Create bibliography
  - id: create_bibliography
    action: generate_text
    dependencies:
      - initial_search
    parameters:
      prompt: |
        Create a professional bibliography for the research on "{{ parameters.research_topic }}" based on these sources:
        
        Search Results: {{ initial_search.result }}
        
        Format as:
        # Bibliography
        
        ## Primary Sources
        [Properly formatted citations with titles, URLs, and access dates]
        
        ## Additional Information
        [Any relevant notes about source credibility or key insights]
      model: "claude-sonnet-4-20250514"
      max_tokens: 1500
      
  # Step 5: Generate final comprehensive report
  - id: generate_report
    tool: filesystem
    action: write
    dependencies:
      - research_summary
      - create_bibliography
    parameters:
      path: "{{ output_path }}/research_{{ parameters.research_topic | slugify }}.md"
      content: |
        # Research Report: {{ parameters.research_topic | title }}
        
        **Date:** {{ timestamp }}
        **Research Topic:** {{ parameters.research_topic }}
        **Sources Analyzed:** {{ parameters.max_sources }}
        
        ---
        
        {{ research_summary.result }}
        
        ---
        
        {{ create_bibliography.result }}
        
        ---
        
        ## Research Methodology
        
        This report was generated using automated web research with the following approach:
        1. Initial broad search for "{{ parameters.research_topic }} latest developments 2024"
        2. Theme identification and analysis
        3. Comprehensive synthesis and report generation
        4. Bibliography creation and validation
        
        **Generated by:** Simplified Web Research Pipeline v1.0
        **Execution Date:** {{ timestamp }}
        
  # Step 6: Generate executive brief
  - id: executive_brief  
    action: generate_text
    dependencies:
      - research_summary
    parameters:
      prompt: |
        Create a concise one-page executive brief for "{{ parameters.research_topic }}" based on this research:
        
        {{ research_summary.result }}
        
        Format as:
        # Executive Brief: {{ parameters.research_topic | title }}
        
        ## Key Takeaways
        - [3 most important insights]
        
        ## Critical Statistics  
        - [2 most important data points]
        
        ## Primary Recommendation
        - [One main actionable recommendation]
        
        ## Market Implications
        - [Brief assessment of market/industry impact]
      model: "claude-sonnet-4-20250514"
      max_tokens: 800
      
  # Step 7: Save executive brief
  - id: save_brief
    tool: filesystem
    action: write
    dependencies:
      - executive_brief
    parameters:
      path: "{{ output_path }}/executive_brief_{{ parameters.research_topic | slugify }}.md"
      content: "{{ executive_brief.result }}"

outputs:
  main_report: "{{ generate_report.path }}"
  executive_brief: "{{ save_brief.path }}"
  sources_analyzed: "{{ parameters.max_sources }}"
  key_themes: "{{ identify_themes.result }}"
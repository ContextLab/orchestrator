name: "Code Analysis Simple"
description: "Simple code analysis pipeline"
model: "anthropic/claude-sonnet-4-20250514"

inputs:
  code_path:
    type: string
    required: true
  language:
    type: string
    default: "python"

steps:
  - id: analyze_structure
    action: |
      Analyze code structure in: {{code_path}}
      Language: {{language}}
      
      Identify:
      1. Main components
      2. Architecture patterns
      3. Dependencies
      4. Entry points
      
          - id: check_quality
          action: |
      Analyze code quality:
      
      Structure: {{analyze_structure.result}}
      
      Check for:
      1. Code style issues
      2. Common anti-patterns
      3. Complexity metrics
      4. Documentation coverage
    depends_on: [analyze_structure]
    
  - id: suggest_improvements
    action: |
      Suggest improvements based on:
      
      Quality analysis: {{check_quality.result}}
      
      Provide:
      1. Priority fixes
      2. Refactoring suggestions
      3. Best practices to adopt
      4. Performance optimizations
    depends_on: [check_quality]
    
  - id: save_analysis
    action: |
      Save to examples/output/code_analysis_{{code_path | replace('/', '_')}}.md:
      
      # Code Analysis Report: {{code_path}}
      
      *Generated on: {{execution.timestamp}}*
      *Language: {{language}}*
      *Model: OpenAI GPT-4 Turbo*
      
      ## Structure Analysis
      
      {{analyze_structure.result}}
      
      ## Quality Assessment
      
      {{check_quality.result}}
      
      ## Improvement Suggestions
      
      {{suggest_improvements.result}}
      
      ---
      *Generated by Orchestrator Code Analysis Pipeline*
    depends_on: [suggest_improvements]


  - id: save_output
    action: |
      Save the following content to examples/output/analysis_simple.md:
      
      # Analysis Simple
      
      *Generated on: {{execution.timestamp}}*
      *Pipeline: analysis_simple*
      
      ## Output
      
      {{suggest_improvements.result}}
      
      ---
      *Generated by Orchestrator Analysis Simple Pipeline*
    depends_on: [suggest_improvements]
outputs:
  analysis: "{{check_quality.result}}"
  suggestions: "{{suggest_improvements.result}}"
  file_path: "examples/output/code_analysis_{{code_path | replace('/', '_')}}.md"

id: statistical_analysis
name: Statistical Analysis Sub-Pipeline
description: Perform comprehensive statistical analysis on data
version: 1.0.0
parameters:
  data: &id001
    type: object
    required: true
    description: Data to analyze (as JSON)
  confidence_level: &id002
    type: number
    default: 0.95
    description: Confidence level for statistical tests
steps:
- id: prepare_data
  tool: filesystem
  action: write
  parameters:
    path: examples/outputs/statistical_analysis/data/input_data.json
    content: '{{ parameters.data | to_json }}'
- id: descriptive_stats
  action: analyze_text
  parameters:
    text: 'Analyze this dataset and provide descriptive statistics:

      {{ parameters.data | to_json }}


      Include: mean, median, standard deviation, min, max, quartiles

      '
    model: <AUTO task="analyze">Select model for statistical analysis</AUTO>
    analysis_type: statistical
  dependencies:
  - prepare_data
- id: distribution_analysis
  action: analyze_text
  parameters:
    text: 'Analyze the distribution of this data:

      {{ parameters.data | to_json }}


      Check for: normality, skewness, kurtosis

      Previous analysis: {{ descriptive_stats.result }}

      '
    model: <AUTO task="analyze">Select model for distribution analysis</AUTO>
    analysis_type: distribution
  dependencies:
  - descriptive_stats
- id: generate_insights
  action: generate_text
  parameters:
    prompt: 'Based on these statistical analyses, generate key insights:


      Descriptive Statistics:

      {{ descriptive_stats.result }}


      Distribution Analysis:

      {{ distribution_analysis.result }}


      Confidence Level: {{ parameters.confidence_level }}


      Provide actionable insights and recommendations.

      '
    model: <AUTO task="generate">Select model for insight generation</AUTO>
    max_tokens: 800
  dependencies:
  - distribution_analysis
- id: save_analysis
  tool: filesystem
  action: write
  parameters:
    path: examples/outputs/statistical_analysis/analysis/statistical_report_{{ execution.timestamp
      | slugify }}.md
    content: '# Statistical Analysis Report


      **Date:** {{ execution.timestamp }}

      **Confidence Level:** {{ parameters.confidence_level }}


      ## Input Data


      ```json

      {{ parameters.data | to_json(indent=2) }}

      ```


      ## Descriptive Statistics


      {{ descriptive_stats.result }}


      ## Distribution Analysis


      {{ distribution_analysis.result }}


      ## Key Insights


      {{ generate_insights.result }}


      ## Methodology


      This analysis was performed using AI-powered statistical analysis with a confidence
      level of {{ parameters.confidence_level * 100 }}%.


      ---

      *Generated by Statistical Analysis Pipeline*

      '
  dependencies:
  - generate_insights
outputs:
  report_file: '{{ save_analysis.filepath }}'
  statistics: '{{ descriptive_stats.result }}'
  distribution: '{{ distribution_analysis.result }}'
  insights: '{{ generate_insights.result }}'
metadata:
  version: 2.0.0
  compatibility: 1.0.0
  migration_notes: Enhanced with new architecture features while maintaining backward
    compatibility
inputs:
  data:
    type: string
    default: *id001
    description: 'Parameter: data'
    required: false
  confidence_level:
    type: string
    default: *id002
    description: 'Parameter: confidence_level'
    required: false
enhanced_outputs:
  report_file:
    description: 'Enhanced output: report_file'
    value: '{{ save_analysis.filepath }}'
    type: auto-detect
  statistics:
    description: 'Enhanced output: statistics'
    value: '{{ descriptive_stats.result }}'
    type: auto-detect
  distribution:
    description: 'Enhanced output: distribution'
    value: '{{ distribution_analysis.result }}'
    type: auto-detect
  insights:
    description: 'Enhanced output: insights'
    value: '{{ generate_insights.result }}'
    type: auto-detect

id: research_minimal
name: Minimal Research Pipeline
description: Simplest possible research - just search and summarize (requires only
  web-search tool)
version: 1.0.0
parameters:
  topic: &id001
    type: string
    required: true
    description: The research topic
  output_path: &id002
    type: string
    default: examples/outputs/research_minimal
    description: Directory where output files will be saved
steps:
- id: search_web
  tool: web-search
  action: search
  parameters:
    query: '{{topic}}'
    max_results: 5
- id: summarize_results
  action: generate_text
  parameters:
    prompt: "Analyze these search results about {{topic}} and provide a structured\
      \ response:\n\n{% for result in search_web.results %}\n{{loop.index}}. {{result.title}}\n\
      \   {{result.snippet}}\n   Source: {{result.url}}\n{% endfor %}\n\nReturn a\
      \ JSON object with the following structure:\n{\n  \"topic\": \"{{topic}}\",\n\
      \  \"overview\": \"Brief one-sentence overview\",\n  \"key_points\": [\n   \
      \ \"First main point (1-2 sentences)\",\n    \"Second main point (1-2 sentences)\"\
      ,\n    \"Third main point (1-2 sentences)\"\n  ],\n  \"summary\": \"Concise\
      \ 2-3 sentence summary of the main findings\"\n}\n\nEnsure the response is valid\
      \ JSON and contains only factual information from the sources.\n"
    model: <AUTO task="summarize">Select appropriate model for summarization</AUTO>
    max_tokens: 500
    response_format: json_object
  dependencies:
  - search_web
- id: save_summary
  tool: filesystem
  action: write
  parameters:
    path: '{{ output_path }}/{{topic | slugify}}_summary.md'
    content: '# Research Summary: {{topic}}

      **Date:** {{ execution.timestamp | date(''%Y-%m-%d %H:%M:%S'') }}

      **Sources Reviewed:** {{search_web.total_results}} sources reviewed


      ## Overview

      {% set summary_data = summarize_results.result | from_json %}

      {{summary_data.overview}}


      ## Key Findings

      {% for point in summary_data.key_points %}

      {{loop.index}}. {{point}}

      {% endfor %}


      ## Summary

      {{summary_data.summary}}


      ## Sources

      {% for result in search_web.results %}

      {{loop.index}}. [{{result.title}}]({{result.url}})

      {% endfor %}


      ---

      *Generated by Simple Research Pipeline*

      '
  dependencies:
  - summarize_results
outputs:
  summary: '{{summarize_results.result}}'
  search_count: '{{search_web.total_results}}'
  output_file: '{{save_summary.filepath}}'
metadata:
  version: 2.0.0
  compatibility: 1.0.0
  migration_notes: Enhanced with new architecture features while maintaining backward
    compatibility
inputs:
  topic:
    type: string
    default: *id001
    description: 'Parameter: topic'
    required: false
  output_path:
    type: string
    default: *id002
    description: 'Parameter: output_path'
    required: false
enhanced_outputs:
  summary:
    description: 'Enhanced output: summary'
    value: '{{summarize_results.result}}'
    type: auto-detect
  search_count:
    description: 'Enhanced output: search_count'
    value: '{{search_web.total_results}}'
    type: auto-detect
  output_file:
    description: 'Enhanced output: output_file'
    value: '{{save_summary.filepath}}'
    type: auto-detect

id: research_basic
name: Basic Research Pipeline
description: Generate research reports using only standard LLM actions (no specialized tools required)
version: "1.0.0"

parameters:
  topic:
    type: string
    required: true
    description: Research topic
  depth:
    type: string
    default: comprehensive
    description: Research depth (basic, comprehensive, or expert)

steps:
  - id: initial_search
    tool: web-search
    action: search
    parameters:
      query: "{{topic}} overview introduction basics"
      max_results: 10
  
  - id: deep_search
    tool: web-search
    action: search
    parameters:
      query: "{{topic}} advanced research latest developments"
      max_results: 10
    dependencies:
      - initial_search
  
  - id: extract_key_points
    action: analyze_text
    parameters:
      text: |
        Topic: {{topic}}
        
        Initial search results:
        {% for result in initial_search.results %}
        - {{result.title}}: {{result.snippet}}
        {% endfor %}
        
        Deep search results:
        {% for result in deep_search.results %}
        - {{result.title}}: {{result.snippet}}
        {% endfor %}
      model: <AUTO task="analyze">Select model for information extraction</AUTO>
      analysis_type: "key_points"
    dependencies:
      - initial_search
      - deep_search
  
  - id: generate_summary
    action: generate_text
    parameters:
      prompt: |
        Generate an executive summary for a research report on "{{topic}}" based on these key points:
        
        {{extract_key_points.result}}
        
        Research depth: {{depth}}
      model: <AUTO task="generate">Select model for summary generation</AUTO>
      max_tokens: 500
    dependencies:
      - extract_key_points
  
  - id: generate_analysis
    action: generate_text
    parameters:
      prompt: |
        Provide a {{depth}} analysis of {{topic}} based on these findings:
        
        {{extract_key_points.result}}
        
        Focus on implications, trends, and future directions.
      model: <AUTO task="analyze">Select model for analysis</AUTO>
      max_tokens: 1000
    dependencies:
      - extract_key_points
  
  - id: save_report
    tool: filesystem
    action: write
    parameters:
      path: "examples/outputs/research_basic/research_{{topic | slugify}}.md"
      content: |
        # Research Report: {{topic}}
        
        **Date:** {{ execution.timestamp }}
        **Research Depth:** {{depth}}
        
        ## Executive Summary
        
        {{generate_summary.result}}
        
        ## Introduction
        
        This report presents a {{depth}} analysis of {{topic}} based on current web sources.
        
        ## Key Findings
        
        {{extract_key_points.result}}
        
        ## Analysis
        
        {{generate_analysis.result}}
        
        ## Sources
        
        ### Initial Search Results ({{initial_search.total_results}} found)
        {% for result in initial_search.results %}
        - [{{result.title}}]({{result.url}})
        {% endfor %}
        
        ### Deep Search Results ({{deep_search.total_results}} found)
        {% for result in deep_search.results %}
        - [{{result.title}}]({{result.url}})
        {% endfor %}
        
        ## Conclusion
        
        This research examined {{topic}} through multiple web sources. The analysis revealed key insights that suggest important trends and future directions in this field.
        
        ---
        *Report generated by Orchestrator Research Pipeline*
    dependencies:
      - generate_summary
      - generate_analysis

outputs:
  report_file: "{{save_report.filepath}}"
  total_sources: "{{initial_search.total_results + deep_search.total_results}}"
  key_findings: "{{extract_key_points.result}}"
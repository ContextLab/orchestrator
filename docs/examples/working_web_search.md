# Working Web Search Pipeline

**Pipeline**: `examples/working_web_search.yaml`  
**Category**: Web & Research  
**Complexity**: Beginner  
**Key Features**: Web search integration, Report generation, Content templating, Real tool usage

## Overview

The Working Web Search Pipeline demonstrates practical web search integration with report generation. It performs web searches using real search tools, processes results through templating, and generates formatted reports, showcasing a complete web research workflow with actual tool implementations.

## Key Features Demonstrated

### 1. Web Search Tool Integration
```yaml
- id: search_web
  tool: web-search
  action: search
  parameters:
    query: "artificial intelligence trends 2024"
    max_results: 5
```

### 2. Template-Based Report Generation
```yaml
- id: generate_summary
  tool: report-generator
  parameters:
    content: |
      {% for result in search_web.results %}
      ## {{ result.title }}
      {{ result.snippet }}
      
      Source: {{ result.url }}
      {% endfor %}
```

### 3. Timestamped Output Files
```yaml
path: "examples/outputs/web_search_example/results_{{ execution.timestamp | slugify }}.md"
```

### 4. Step Dependencies
```yaml
dependencies:
  - search_web      # generate_summary depends on search results
  - generate_summary # save_results depends on report generation
```

## Pipeline Architecture

### Input Parameters
None (uses hardcoded search query for demonstration)

### Processing Flow

1. **Search Web** - Perform web search with specified query
2. **Generate Summary** - Create formatted report from search results
3. **Save Results** - Store execution summary to timestamped file

### Search Configuration
- **Query**: "artificial intelligence trends 2024"
- **Max Results**: 5 search results
- **Tool**: web-search with search action

## Usage Examples

### Basic Web Search
```bash
python scripts/run_pipeline.py examples/working_web_search.yaml
```

### Custom Output Location
```bash
python scripts/run_pipeline.py examples/working_web_search.yaml \
  -o examples/outputs/my_search_results
```

### Integration Test
```bash
# Test web search tool availability
python scripts/run_pipeline.py examples/working_web_search.yaml \
  --validate-tools
```

## Search Results Processing

### Expected Search Result Structure
```json
{
  "results": [
    {
      "title": "AI Trends 2024: What to Expect",
      "snippet": "Artificial intelligence continues to evolve rapidly...",
      "url": "https://example.com/ai-trends-2024"
    },
    {
      "title": "Machine Learning Advances in 2024",
      "snippet": "Key developments in machine learning include...",
      "url": "https://example.com/ml-advances"
    }
  ]
}
```

### Template Processing
```yaml
{% for result in search_web.results %}
## {{ result.title }}                 # Search result title as heading
{{ result.snippet }}                  # Search result description
                                      
Source: {{ result.url }}              # Source URL for reference
                                      
{% endfor %}
```

## Generated Output Structure

### Summary Report Format
```markdown
# Search Results Summary

Based on web search for "artificial intelligence trends 2024":

## AI Trends 2024: What to Expect
Artificial intelligence continues to evolve rapidly with new developments
in machine learning, natural language processing, and automation.

Source: https://example.com/ai-trends-2024

## Machine Learning Advances in 2024  
Key developments in machine learning include improved neural architectures,
better training methodologies, and expanded real-world applications.

Source: https://example.com/ml-advances
```

### Execution Summary
```markdown
# Web Search and Summary Pipeline Results

**Date:** 2024-08-23T10:30:00Z
**Pipeline ID:** web_search_example

## Execution Summary

Pipeline completed successfully.

---
*Generated by Web Search and Summary Pipeline*
```

### File Naming Convention
```
examples/outputs/web_search_example/
└── results_2024-08-23t10-30-00z.md    # Timestamped result file
```

## Tool Integration Details

### Web Search Tool
```yaml
tool: web-search
action: search
# Performs actual web search using search engine APIs
# Returns structured results with title, snippet, and URL
```

### Report Generator Tool
```yaml
tool: report-generator
action: generate
# Creates formatted reports with title and templated content
# Processes Jinja2 templates with search result data
```

### File System Tool
```yaml
tool: filesystem
action: write
# Writes generated content to specified file path
# Supports template variables in path names
```

## Template Features

### Loop Processing
```yaml
{% for result in search_web.results %}
# Process each search result individually
{% endfor %}
```

### Variable Interpolation
```yaml
{{ result.title }}        # Search result title
{{ result.snippet }}      # Search result description  
{{ result.url }}          # Source URL
{{ execution.timestamp }} # Pipeline execution time
```

### Template Filters
```yaml
{{ execution.timestamp | slugify }}  # Convert timestamp to URL-safe format
```

## Real-World Applications

### Research Automation
```yaml
# Modified for research topics
query: "{{ research_topic }} recent developments"
max_results: 10

# Generate research summaries automatically
```

### News Monitoring
```yaml
# Monitor specific topics
query: "{{ company_name }} news updates"
max_results: 20

# Track company mentions and developments
```

### Market Intelligence
```yaml  
# Industry trend analysis
query: "{{ industry }} market trends {{ current_year }}"
max_results: 15

# Competitive intelligence gathering
```

### Content Research
```yaml
# Content creation support
query: "{{ topic }} best practices guide"
max_results: 8

# Research for article writing
```

## Pipeline Customization

### Dynamic Query Configuration
```yaml
inputs:
  search_query:
    type: string
    default: "artificial intelligence trends 2024"
  
parameters:
  query: "{{ search_query }}"
```

### Configurable Result Count
```yaml
inputs:
  max_results:
    type: integer  
    default: 5
    
parameters:
  max_results: "{{ max_results }}"
```

### Custom Report Format
```yaml
parameters:
  content: |
    # {{ search_query }} Research Report
    
    Generated on: {{ execution.timestamp }}
    
    {% for result in search_web.results %}
    ### Finding {{ loop.index }}: {{ result.title }}
    
    **Summary**: {{ result.snippet }}
    
    **Source**: [{{ result.title }}]({{ result.url }})
    
    ---
    {% endfor %}
```

## Error Handling Considerations

### Search Tool Failures
- Network connectivity issues
- Search engine API rate limits
- Invalid or restricted queries
- No results found scenarios

### Template Processing Errors
- Missing result properties
- Invalid template syntax
- Variable reference errors
- Encoding issues with special characters

### File System Issues
- Output directory permissions
- Disk space limitations
- Invalid file path characters
- Concurrent file access conflicts

## Performance Considerations

### Search Efficiency
- **Result Limit**: Balance comprehensiveness vs. speed
- **Query Optimization**: Use specific, targeted search terms
- **Caching**: Consider caching frequent searches
- **Rate Limiting**: Respect search API limitations

### Template Processing
- **Result Size**: Large result sets may slow template processing
- **Memory Usage**: Consider memory impact with many results
- **Template Complexity**: Keep templates simple for better performance

## Best Practices Demonstrated

1. **Real Tool Integration**: Uses actual web search capabilities
2. **Structured Output**: Consistent result formatting
3. **Template Organization**: Clean, readable template structure
4. **Dependency Management**: Proper step sequencing
5. **Timestamping**: Unique output files for each execution
6. **Error Prevention**: Simple, robust pipeline design

## Common Use Cases

- **Research Automation**: Automated literature reviews and research
- **Content Creation**: Research support for writing and content development
- **Market Intelligence**: Competitive analysis and market research
- **News Monitoring**: Automated news gathering and summarization
- **Trend Analysis**: Industry trend monitoring and reporting
- **Due Diligence**: Company and topic research for business decisions

## Troubleshooting

### No Search Results
- Verify search query is appropriate
- Check web search tool configuration
- Ensure search service is accessible
- Try alternative search terms

### Template Rendering Issues
- Validate search result structure matches template expectations
- Check for missing result properties
- Verify Jinja2 template syntax
- Test with sample data

### File Output Problems
- Verify output directory exists and is writable
- Check file path length and character restrictions
- Ensure adequate disk space
- Validate timestamp format in file names

## Related Examples
- [web_research_pipeline.md](web_research_pipeline.md) - Advanced web research with multiple sources
- [research_basic.md](research_basic.md) - Basic research pipeline patterns
- [mcp_simple_test.md](mcp_simple_test.md) - MCP-based web search integration

## Technical Requirements

- **Web Search Tool**: Configured web search service with API access
- **Report Generator**: Template processing capabilities
- **File System**: Write access to output directories
- **Template Engine**: Jinja2 template processing support
- **Network Access**: Internet connectivity for web searches

This pipeline demonstrates practical web search integration and provides a foundation for building more sophisticated web research and content generation workflows.